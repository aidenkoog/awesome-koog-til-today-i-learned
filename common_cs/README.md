#### 블로킹, 논블로킹, 동기, 비동기에 대한 설명

- 블로킹, 논블로킹: A 함수가 B 함수를 호출했을 때 **제어권을 어떻게 처리하느냐에** 따라 달라진다.
  - **블로킹**: A 함수가 B 함수를 호출하면, 제어권을 A가 호출한 B함수에 넘겨준다.
  - **논블로킹**: A 함수가 B 함수를 호출해도 제어권은 그대로 자신이 가지고 있음.
- 동기, 비동기: 호출되는 **함수의 작업 완료 여부를 신경쓰는지**의 여부 차이
  - **동기**: 함수 B의 리턴값을 계속 확인하면서 신경쓰는 것
  - **비동기**: 함수 A가 B를 호출할 때 콜백 함수를 함께 전달, 함수 B의 작업이 완료되면 콜백 함수를 실행. 함수 A는 B를 호출한 이후로 함수 B의 작업 완료 여부에는 신경쓰지 않음.
- **Sync Blocking**
  - 함수는 다른 함수의 리턴값을 고려해서 동작 (동기)
  - 함수는 다른 함수에게 제어권을 넘겨주고 대기 (블로킹)
- **Sync NonBlocking**
- **Async-NonBlocking**
- **Async-blodking**

#### 프로세스와 스레드 차이점

- 참고. 프로그램: 어떤 작업을 위해 실행할 수 있는 파일
- 프로세스
  - 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
  - 메모리에 올라와 실행되고 있는 프로그램의 인스턴스 (독립적인 개체)
  - 운영체제로부터 시스템 자원을 할당받는 작업 단위
    - CPU 시간 / 운영에 필요한 주소 공간 / 코드-데이터-스택-힙의 구조로 되어 있는 독립된 메모리 영역
  - 실행된 프로그램
  - 프로세스는 각각 독립된 메모리 영역을 할당받음
  - 최소 1개의 스레드 (메인 스레드)를 가지고 있음
  - 별도의 주소 공간에서 실행되며, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근 불가능
  - 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신 필요
    - IPC : Inter-Process Communication
    - Ex. 파이프, 파일, 소켓 등을 이용한 통신 방법 이용
- 스레드
  - 프로세스 내에서 실행되는 여러 흐름의 단위
  - 프로세스의 특정한 수행 경로
  - 프로세스가 할당받은 자원을 이용하는 실행 단위
  - 스레드는 각각 스택만 따로 할당받고 나머지 메모리 영역은 공유
  - 프로세스 내의 주소 공간이나 자원을 같은 프로세스 내 스레드끼리 공유하면서 실행
  - 같은 프로세스 안에 있는 여러 스레드들은 같은 힙 공간 공유
  - 별도의 레지스터와 스택 가지고 있음
  - 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드도 그 변경 결과를 즉시 볼 수 있음
  - 자바 스레드 (Java Thread)
    - JVM이 운영체제의 역할, 나머지는 일반 스레드와 동일
    - 자바에는 프로세스는 존재 X, 스레드만 존재
    - JVM에 의해 스케쥴되는 실행 단위 코드 블록
    - 스레드 스케쥴링은 전적으로 JVM에 의해 이루어짐
    - JVM 이 관리하는 항목
      - 스레드 개수
      - 스레드로 실행되는 프로그램 코드의 메모리 위치
      - 스레드 상태
      - 스레드 우선순위
    - 개발자는 스레드 코드 작성 후 그 코드가 실행을 시작하도록 JVM에 요청하는 일을 하는 것

#### 멀티 프로세스와 멀티 스레드의 차이

- 멀티 프로세스
  - 멀티 프로세싱
    - 하나의 응용 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업(Task)을 처리하도록 하는 것
  - 여러 개 프로세스 중 하나에 문제가 생겨도 전체 흐름에 영향 없음
  - 단점
    - Context Switching 에서의 오버헤드
      - Context Switching: CPU에서 여러 프로세스를 돌아가면서 작업 처리하는 과정
      - 캐쉬 메모리 초기화 등의 무거운 작업 진행 및 많은 시간 소요
      - 프로세스 특성 상 서로 공유하는 메모리가 없어 컨텍스트 스위칭이 발생하면 캐쉬에 있는 모든 데이터를 리셋하고 다시 데이터를 불러와야 하는 문제 있음
      - CPU 레지스터 교체 / RAM, CPU 사이 캐쉬 메모리 데이터 초기화
- 멀티 스레드
  - 멀티 스레딩
    - 하나의 응용 프로그램을 여러 개의 스레드로 구성하고 각 스레드로 하여금 하나의 작업을 처리하도록 하는 것
    - 웹 서버는 대표적인 멀티 스레드 프로그램
    - 장점
      - 시스템 자원 소모 감소 (효율성 증대)
        - 프로세스 생성 후 자원 할당을 위한 시스템 콜이 줄어들어 자원을 효율적으로 관리 가능
      - 시스템 처리량 증가 (처리 비용 감소)
        - 데이터 공유가 간단, 자원 소모 감소
        - 작업량이 작아 컨텍스트 스위칭이 빠름
      - 간단한 통신 방법으로 인한 응답 시간 단축
        - 스택을 제외한 나머지 모든 메모리 영역을 공유하기 때문에
    - 단점
      - 설계 주의
      - 어려운 디버깅
      - 단일 프로세스 시스템의 경우 효과를 기대하기 어려움
      - 다른 프로세스에서 스레드 제어 불가능
      - 자원 공유의 문제 발생 (동기화)
        - 전역 변수 (데이터 세그먼트) 이용한 자원 공유가 이루어지므로 함께 사용 시 동기화 문제 발생 가능성
      - 하나의 스레드에 문제가 발생하면 전체 프로세스가 영향 받음

#### 컨텍스트 스위칭 개념

- CPU 에서 여러 프로세스를 돌아가면서 작업을 처리하는 과정
- 동작 중인 프로세스가 대기를 하면서 해당 프로세스의 상태 (Context)를 보관하고, 대기하고 있던 다음 순서의 프로세스가 동작하면서 이전에 보관했던 프로세스의 상태를 복구하는 작업
- 스위칭 시 CPU 레지스터 교체 / RAM, CPU 사이의 캐쉬 메모리 데이터 초기화

#### 프로세스 제어 블록

- Process Control Block, PCB
- 프로세스에 대한 중요한 정보를 저장하고 있는 OS의 자료구조
- OS는 프로세스 관리를 위해 프로세스의 생성과 동시에 고유한 PCB를 생성
- 저장되는 정보
  - PID
  - 프로세스 상태
  - 프로그램 카운터 (다음에 실행할 명령어의 주소)
  - CPU 레지스터
  - CPU 스케쥴링 정보 (우선순위, 스케쥴 큐에 대한 포인터)
  - 메모리 관리 정보
  - 입출력 관리 정보 (할당된 입출력 장치들과 열린 파일 목록)
  - 어카운팅 정보 (사용된 CPU 시간, 시간제한, 계정번호)
